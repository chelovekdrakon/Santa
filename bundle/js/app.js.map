{"version":3,"sources":["webpack:///webpack/bootstrap 88b66ab6195643837a01","webpack:///./src/js/Entity.js","webpack:///./src/js/loaders.js","webpack:///./src/js/SourceSprites.js","webpack:///./src/js/mathematics.js","webpack:///./src/js/sprites.js","webpack:///./src/js/app.js","webpack:///./src/js/Compositor.js","webpack:///./src/js/TimeHandler.js","webpack:///./src/js/layers.js","webpack:///./src/js/entities.js","webpack:///./src/js/features/Velocity.js","webpack:///./src/js/features/Jump.js","webpack:///./src/js/KeyboardListener.js","webpack:///./style/css/style.css","webpack:///./style/scss/style.scss"],"names":["Feature","constructor","name","NAME","update","Entity","position","velocity","features","addFeature","feature","push","deltaTime","forEach","loadImage","url","Promise","resolve","img","Image","src","addEventListener","loadDataFromJSON","nameFile","fetch","then","response","json","SourceSprites","image","widthOfTile","heightOfTile","tilesMap","Map","startOfTileX","startOfTileY","defineTilePerJSON","fileJSON","nameTile","getCoordinatesOfTileFromJSON","bufferForTile","document","createElement","width","height","bufferContext","getContext","drawImage","set","drawTile","context","x","y","buffer","get","frame","w","h","Vector","loadBacgroundSprites","sprites","spritesDataFromJSON","loadHeroSprites","canvas","getElementById","setAttribute","all","createHero","hero","bacgroundSprites","levelDataFromJSON","compos","backgroundLayer","createBackgroundLayer","backgrounds","layers","gravity","SPACE","keyInput","addMapping","keyState","jump","start","cancel","listenTo","window","heroLayer","createSpriteLayer","timer","drawLayerWithContext","Compositor","layer","TimeHandler","overalTime","lastTime","updateHelper","time","queueOfProces","requestAnimationFrame","bgcBuffer","background","drawBackground","drawBgcLayer","backgrounOf","ranges","x1","x2","y1","y2","tile","entity","drawSpriteLayer","draw","sprite","drawHero","Velocity","dT","Jump","duration","engageTime","PRESSED","RELEASED","KeyboardListener","currentKeyStates","funsForKeyMap","keyCode","callback","handleEvent","event","has","preventDefault","type","eventType","e"],"mappings":"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","file":"bundle/js/app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 88b66ab6195643837a01","import {Vector} from './mathematics.js';\r\n\t\r\n\texport class Feature {\r\n\t\tconstructor(name) {\r\n\t\t\tthis.NAME = name;\r\n\t\t}\r\n\r\n\t\tupdate() {\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\texport default class Entity {\r\n\t\tconstructor() {\r\n\t\t\tthis.position = new Vector(0,0);\r\n\t\t\tthis.velocity = new Vector(0,0);\r\n\r\n\t\t\tthis.features = [];\r\n\t\t}\r\n\r\n\t\taddFeature(feature) {\r\n\t\t\tthis.features.push(feature);\r\n\t\t\tthis[feature.NAME] = feature; \r\n\t\t}\r\n\r\n\t\tupdate(deltaTime) {\r\n\t\t\tthis.features.forEach(feature => {\r\n\t\t\t\tfeature.update(this, deltaTime);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Entity.js","\texport function loadImage(url) {\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tconst img = new Image();\r\n\t\t\t\timg.src = url;\r\n\t\t\t\timg.addEventListener('load', () => {\r\n\t\t\t\t\tresolve(img);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\texport function loadDataFromJSON(nameFile) {\r\n\t\treturn fetch(`/src/database/${nameFile}.json`)\r\n\t\t.then(response => response.json());\r\n\t}\n\n\n// WEBPACK FOOTER //\n// ./src/js/loaders.js","import {loadTilesFromJSON} from './loaders.js';\r\n\r\n\r\nexport default class SourceSprites {\r\n\tconstructor(image) {\r\n\t\tthis.image = image;\r\n\t\tthis.widthOfTile ;\r\n\t\tthis.heightOfTile ; \r\n\t\tthis.tilesMap = new Map();\r\n\t\tthis.startOfTileX ;\r\n\t\tthis.startOfTileY ;\r\n\t}\r\n\r\n\tdefineTilePerJSON(fileJSON, nameTile) {\r\n\t\t\tthis.getCoordinatesOfTileFromJSON(fileJSON, nameTile);\r\n\t\t\tconst bufferForTile = document.createElement('canvas');\r\n\t\t\tbufferForTile.width = this.widthOfTile;\r\n\t\t\tbufferForTile.height = this.heightOfTile;\r\n\t\t\tconst bufferContext = bufferForTile.getContext('2d');\r\n\t\t\tbufferContext.drawImage(\r\n\t\t\t\tthis.image,\r\n\t\t\t\tthis.startOfTileX,\r\n\t\t\t\tthis.startOfTileY,\r\n\t\t\t\tthis.widthOfTile,\r\n\t\t\t\tthis.heightOfTile,\r\n\t\t\t\t0,\r\n\t\t\t\t0,\r\n\t\t\t\tthis.widthOfTile,\r\n\t\t\t\tthis.heightOfTile);\r\n\t\t\tthis.tilesMap.set(nameTile, bufferForTile);\r\n\t}\r\n\r\n\tdrawTile(nameTile, context, x, y) {\r\n\t\t\tconst buffer = this.tilesMap.get(nameTile);\r\n\t\t\tcontext.drawImage(buffer, x, y);\t\r\n\t}\r\n\r\n\tgetCoordinatesOfTileFromJSON(fileJSON, nameTile) {\r\n\t\tthis.startOfTileX = fileJSON[nameTile].frame.x;\r\n\t\tthis.startOfTileY = fileJSON[nameTile].frame.y;\r\n\t\tthis.widthOfTile = fileJSON[nameTile].frame.w;\r\n\t\tthis.heightOfTile = fileJSON[nameTile].frame.h;\r\n\t}\r\n}\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/SourceSprites.js","export \tclass Vector {\r\n\t\tconstructor(x, y) {\r\n\t\t\tthis.set(x, y);\r\n\t\t}\r\n\r\n\t\tset(x, y) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t}\r\n\t}\n\n\n// WEBPACK FOOTER //\n// ./src/js/mathematics.js","import SourceSprites from './SourceSprites.js';\r\nimport {loadImage, loadDataFromJSON} from './loaders.js';\r\n\r\nexport function loadBacgroundSprites() {\r\n\treturn loadImage('../images/sprites.png')\r\n\t// return loadImage('../images/minSprites.png')\r\n\t\r\n\t.then(image => {\r\n\t\tconst sprites = new SourceSprites(image);\r\n\t\treturn sprites ;\r\n\t})\r\n\t.then(sprites => {\r\n\t\treturn loadDataFromJSON('sprites')\r\n\t\t.then( spritesDataFromJSON => {\r\n\t\t\tsprites.defineTilePerJSON(spritesDataFromJSON, 'box-g.png');\r\n\t\t\tsprites.defineTilePerJSON(spritesDataFromJSON, 'box-b1.png');\r\n\t\t\treturn sprites ;\r\n\r\n\t\t// return loadDataFromJSON('minSprites')\r\n\t\t// .then( spritesDataFromJSON => {\r\n\t\t// \tsprites.defineTilePerJSON(spritesDataFromJSON, 'box-ice.png');\r\n\t\t// \tsprites.defineTilePerJSON(spritesDataFromJSON, 'sky.png');\r\n\t\t// \treturn sprites ;\r\n\r\n\r\n\t\t});\r\n\t});\r\n}\r\n\r\nexport function loadHeroSprites() {\r\n\treturn loadImage('../images/sprites.png')\r\n\t// return loadImage('../images/minSprites.png')\r\n\t.then(image => {\r\n\t\tconst sprites = new SourceSprites(image);\r\n\t\treturn sprites ;\r\n\t})\r\n\t.then(sprites => {\r\n\t\treturn loadDataFromJSON('sprites')\r\n\t\t// return loadDataFromJSON('minSprites')\r\n\t\t.then( spritesDataFromJSON => {\r\n\t\t\tsprites.defineTilePerJSON(spritesDataFromJSON, 'boy4.png');\r\n\t\t\treturn sprites ;\r\n\t\t});\r\n\t});\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/sprites.js","\r\nimport SourceSprites from './SourceSprites.js';\r\nimport Compositor from './Compositor.js';\r\nimport {Vector} from './mathematics.js';\r\nimport Entity from './Entity.js';\r\nimport TimeHandler from './TimeHandler.js';\r\nimport {loadDataFromJSON} from './loaders.js';\r\nimport {loadBacgroundSprites, loadHeroSprites} from './sprites.js';\r\nimport {createBackgroundLayer, createSpriteLayer} from './layers.js';\r\nimport {createHero} from './entities.js';\r\n\r\nimport KeyboardListener from './KeyboardListener.js';\r\n\r\n\tconst canvas = document.getElementById('canvas');\r\n\tcanvas.setAttribute('width', 960);\r\n\tcanvas.setAttribute('height', 640);\r\n\tconst context = canvas.getContext('2d');\r\n\r\n\tPromise.all([\r\n\t\tcreateHero(),\r\n\t\tloadBacgroundSprites(),\r\n\t\tloadDataFromJSON('level-1')\r\n\t\t])\r\n\t\t.then(([hero, bacgroundSprites, levelDataFromJSON]) => {\r\n         \r\n\t\t\tlet compos = new Compositor();\r\n\r\n\t\t\tlet backgroundLayer = createBackgroundLayer(levelDataFromJSON.backgrounds, bacgroundSprites);\r\n\t\t\tcompos.layers.push(backgroundLayer);\r\n\r\n\t\t\tconst gravity = 1000;  // for example\r\n\t\t\thero.position.set(60, 320);\r\n\t\t\t// hero.position.set(60, 520);\r\n\t\t\t// hero.velocity.set(300, -1000);\r\n\r\n\t\t\tconst SPACE = 32;\r\n\t\t\tlet keyInput = new KeyboardListener();\r\n\t\t\tkeyInput.addMapping(SPACE, keyState => {\r\n\t\t\t\tif(keyState) {\r\n\t\t\t\t\thero.jump.start();\r\n\t\t\t\t} else {\r\n\t\t\t\t\thero.jump.cancel();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tkeyInput.listenTo(window);\r\n\r\n\t\t\tlet heroLayer = createSpriteLayer(hero);\r\n\t\t\tcompos.layers.push(heroLayer);\r\n\r\n\t\t\t/* for normalize and unification time flying */\r\n\t\t\tlet timer = new TimeHandler(1/60);\r\n\t\t\ttimer.update = function update(deltaTime) {\r\n\t\t\t\t\r\n\t\t\t\thero.update(deltaTime);\r\n\t\t\t\tcompos.drawLayerWithContext(context);\r\n\t\t\t\thero.velocity.y += gravity*deltaTime;\r\n\t\t\t};\r\n\r\n\t\t\ttimer.start();\r\n\r\n\t\t})\r\n\r\n\r\n\r\n\r\n\t\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/app.js","export default \tclass Compositor {\r\n\t\tconstructor(){\r\n\t\t\tthis.layers = [];\r\n\t\t}\r\n\r\n\t\tdrawLayerWithContext(context) {\r\n\t\t\tthis.layers.forEach(layer => {\r\n\t\t\t\tlayer(context);\r\n\t\t\t})\r\n\t\t}\r\n\t}\n\n\n// WEBPACK FOOTER //\n// ./src/js/Compositor.js","export default class TimeHandler {\r\n\tconstructor(deltaTime = 1/60) {\r\n\t\tlet overalTime = 0;\r\n\t\tlet lastTime = 0;\r\n\r\n\t\tthis.updateHelper = (time) => {\r\n\t\t\toveralTime += (time-lastTime) / 1000;\r\n\r\n\t\t\twhile (overalTime > deltaTime) {\r\n\t\t\t\tthis.update(deltaTime);\r\n\t\t\t\toveralTime -= deltaTime;\r\n\t\t\t}\r\n\r\n\t\t\tlastTime = time;\r\n\r\n\t\t\tthis.queueOfProces();\r\n\t\t}\r\n\t}\r\n\r\n\tqueueOfProces(){\r\n\t\trequestAnimationFrame(this.updateHelper);\r\n\t}\r\n\r\n\tstart() {\r\n\t\tthis.queueOfProces();\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/TimeHandler.js","\t\r\n\r\n\r\n\texport function createBackgroundLayer(backgrounds, sprites) {\r\n\t\tlet bgcBuffer = document.createElement('canvas');\r\n\t\tbgcBuffer.width = 960;\r\n\t\tbgcBuffer.height = 640;\r\n\r\n\t\tbackgrounds.forEach(background => {\r\n\t\t\tdrawBackground(background, bgcBuffer.getContext('2d'), sprites);\r\n\t\t});\r\n\r\n\t\treturn function drawBgcLayer(context) {\r\n\t\t\tcontext.drawImage(bgcBuffer, 0, 0);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction drawBackground(backgrounOf, context, sprites) {\r\n\t\tbackgrounOf.ranges.forEach(([x1, x2, y1, y2]) => {\r\n\t\t\tfor(let x = x1; x < x2; x = x+37) {\r\n\t\t\t\tfor(let y = y1; y<y2; y= y+37) {\r\n\t\t\t\tsprites.drawTile(backgrounOf.tile, context, x, y);\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\t\r\n\r\n\texport \tfunction createSpriteLayer(entity) {\r\n\t\treturn function drawSpriteLayer(context) {\r\n\t\t\tentity.draw(context);\r\n\t\t}\r\n\t}\n\n\n// WEBPACK FOOTER //\n// ./src/js/layers.js","import Entity from './Entity.js';\r\nimport {loadHeroSprites} from './sprites.js';\r\nimport Velocity  from './features/Velocity.js';\r\nimport Jump  from './features/Jump.js';\r\n\r\n\texport function createHero(){\r\n\r\n\r\n\t\treturn loadHeroSprites()\r\n\t\t.then( sprite => {\r\n\t\t\tconst hero = new Entity();\r\n\r\n\t\t\thero.addFeature(new Velocity());\r\n\t\t\thero.addFeature(new Jump());\r\n\r\n\t\t\thero.draw = function drawHero(context) {\r\n\t\t\t\tsprite.drawTile('boy3.png', context, this.position.x, this.position.y);\r\n\t\t\t\t// sprite.drawTile('bo4.png', context, this.position.x, this.position.y);\r\n\t\t\t}\r\n\t\t\treturn hero;\r\n\t\t});\t\r\n\t}\r\n\r\n\t\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/entities.js","import {Feature} from '../Entity.js';\r\n\r\n\r\nexport default class Velocity extends Feature {\r\n\t\tconstructor() {\r\n\t\t\tsuper('velocityFeature');\r\n\t\t}\r\n\r\n\t\tupdate(entity, dT) {\r\n\t\t\tentity.position.x += entity.velocity.x * dT;\r\n\t\t\tentity.position.y += entity.velocity.y*dT;\t\t\t\t\r\n\t\t}\r\n\t}\n\n\n// WEBPACK FOOTER //\n// ./src/js/features/Velocity.js","import {Feature} from '../Entity.js';\r\n\r\nexport default class Jump extends Feature {\r\n\t\tconstructor() {\r\n\t\t\tsuper('jump');\r\n\r\n\t\t\tthis.duration = 0.5;\r\n\t\t\tthis.velocity = 200;\r\n\t\t\tthis.engageTime = 0;\r\n\t\t}\r\n\r\n\t\tstart() {\r\n\t\t\tthis.engageTime = this.duration;\r\n\t\t}\r\n\r\n\t\tcancel() {\r\n\r\n\t\t}\r\n\r\n\t\tupdate(entity, dT) {\r\n\t\t\tif (this.engageTime > 0) {\r\n\t\t\t\tentity.velocity.y = -this.velocity;\r\n\t\t\t\tthis.engageTime =- dT;\r\n\t\t\t}\r\n\t\t}\r\n\t}  \n\n\n// WEBPACK FOOTER //\n// ./src/js/features/Jump.js","const PRESSED = true;\r\nconst RELEASED = false;\r\n\r\nexport default class KeyboardListener {\r\n\tconstructor() {\r\n\t\tthis.currentKeyStates = new Map();\r\n\t\tthis.funsForKeyMap = new Map();\r\n\t}\r\n\r\n\taddMapping(keyCode, callback) {\r\n\t\tthis.funsForKeyMap.set(keyCode, callback);\r\n\t}\r\n\r\n\thandleEvent(event) {\r\n\t\tconst {keyCode} = event;\r\n\r\n\t\tif(!this.funsForKeyMap.has(keyCode)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tconst keyState = event.type === 'keydown' ? PRESSED : RELEASED;\r\n\r\n\t\tif (this.currentKeyStates.get(keyCode) === keyState) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.currentKeyStates.set(keyCode, keyState);\r\n\r\n\t\tthis.funsForKeyMap.get(keyCode)(keyState);\r\n\t}\r\n\r\n\tlistenTo(window) {\r\n\t\t['keydown', 'keyup'].forEach(eventType => {\r\n\t\t\twindow.addEventListener(eventType, e => {\r\n\t\t\t\tthis.handleEvent(e);\r\n\t\t\t})\r\n\t\t})\r\n\t\t\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/KeyboardListener.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./style/css/style.css\n// module id = 14\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./style/scss/style.scss\n// module id = 15\n// module chunks = 0"],"sourceRoot":""}